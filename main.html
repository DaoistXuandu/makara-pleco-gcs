<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

</head>

<body style="font-family: 'Noto Sans'; margin: 0px; padding: 40px;">
    <h1 style="display: flex; flex-direction: row; gap: 10px; margin: 0px;">
        <p style="color: #F7DC6F;">AMV UI</p>
        <p>-</p>
        <p>MAKARA PLECO</p>
    </h1>
    <div style="display: flex; flex-direction: row; margin: 0px; gap: 20px;">
        <div style="width: 50%; display: flex; flex-direction: column; gap: 30px; padding-top: 30px;">
            <div style="margin: 0px">
                <h1 style="font-size: x-large; margin: 0px;">GeoTag Info</h1>
                <div style="display: flex; flex-direction: columns;">
                    <div style="width: 50%; display: flex; flex-direction: column; gap: 8px; padding-top: 8px;">
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">Time:</p>
                            <p style="margin: 0px;" id="time"></p>
                        </div>
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">SOG:</p>
                            <div style="display: flex; flex-direction: row; gap: 4px;">
                                <div style="display: flex; flex-direction: row; gap: 4px;">
                                    <p id="sog-knot">12</p>
                                    <p>Knot</p>
                                </div>
                                <p>/</p>
                                <div style="display: flex; flex-direction: row; gap: 4px; ">
                                    <p id="sog-metric">20</p>
                                    <p>KM/J</p>
                                </div>
                            </div>
                        </div>
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">Date:</p>
                            <p style="margin: 0px;" id="date"></p>
                        </div>
                    </div>
                    <div style="width: 50%; display: flex; flex-direction: column; gap: 8px; padding-top: 8px;">
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">Day:</p>
                            <p style="margin: 0px;" id="day"></p>
                        </div>
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">Cog:</p>
                            <div style="display: flex; flex-direction: row;">
                                <p style="margin: 0px;" id="cog">20</p>
                                <sup>o</sup>
                            </div>
                        </div>
                        <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 4px;">
                            <p style="margin: 0px; font-size: large; font-weight: 600;">Coordinate:</p>
                            <div style="display: flex; flex-direction: row;">
                                <p>[</p>
                                <p style="margin: 0px;" id="coordinate">
                                    S 3.56734 E 104.67235
                                </p>
                                <p>]</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div>
                <h1 style="font-size: x-large; margin: 0px;">Position Log</h1>
                <div style="display: flex; flex-direction: column;">
                    <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                        <p style="margin: 0px; font-size: large; font-weight: 600;">Current Mission:</p>
                        <p style="margin: 0px;" id="mission"></p>
                    </div>
                    <div style="margin: 0px; display: flex; flex-direction: column;">
                        <p style="margin: 0px; font-size: large; font-weight: 600;">Status:</p>
                        <div>
                            <ul style="margin-left: 30px;">
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div style="display: flex; flex-direction: row; gap: 6px;">
                                        <div style="width: 50%;" class="status"></div>
                                        <div style="width: 50%; padding: 2px; background-color: blue; font-weight: bold; border-radius: 20px; color: white; text-align: center;"
                                            class="status">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <h1 style="font-size: x-large; margin: 0px;">Trajectory Graph</h1>
                <p>Bang Athar bantu bang ini gimana caranya</p>
            </div>
            <div>
                <h1 style="font-size: x-large; margin: 0px;">Information</h1>
                <div style="display: flex; flex-direction: column; gap: 8px; padding-top: 8px;">
                    <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                        <p style="margin: 0px; font-size: large; font-weight: 600;">Battery Status:</p>
                        <div style="display: flex; flex-direction: row; gap: 2px;">
                            <p style="margin: 0px;" id="battery">55</p>
                            <p>%</p>
                        </div>
                    </div>
                    <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                        <p style="margin: 0px; font-size: large; font-weight: 600;">Compass:</p>
                        <div style="display: flex; flex-direction: row;">
                            <p style="margin: 0px;" id="compass">330</p>
                            <sup>o</sup>
                        </div>
                    </div>
                    <div style="margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 8px;">
                        <p style="margin: 0px; font-size: large; font-weight: 600;">Temprature:</p>
                        <div style="display: flex; flex-direction: row;">
                            <p style="margin: 0px;" id="compass">20</p>
                            <p><sup>o</sup>C</p>

                        </div>
                    </div>
                </div>
            </div>
            <div>
                <h1
                    style="font-size: x-large; margin: 0px; display: flex; flex-direction: row; align-items: center; gap: 10px;">
                    Track: <p style="font-weight: 300;" id="track">A</p>
                </h1>
                <div style="position: relative;">
                    <div style="position: absolute; width: 100%; height: 100%;" id="position">
                    </div>
                    <div style="position: relative;">
                        <div style="width: 100%; display: flex; flex-direction: row;">
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 2px 2px 2px 2px; position: relative;">
                                <div style="position: absolute; right: 10px; top: 10px; font-size: x-large;">E</div>
                                <div style="position: absolute; left: 10px; bottom: 10px; font-size: x-large;">5</div>
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 2px 2px 2px 0px; display: flex; justify-content: end; font-size: x-large; padding: 10px;">
                                D
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 2px 2px 2px 0px; display: flex; justify-content: end; font-size: x-large; padding: 10px;">
                                C
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 2px 2px 2px 0px; display: flex; justify-content: end; font-size: x-large; padding: 10px;">
                                B
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 2px 2px 2px 0px; display: flex; justify-content: end; font-size: x-large; padding: 10px;">
                                A
                            </div>
                        </div>
                        <div style="width: 100%; display: flex; flex-direction: row;">
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 2px; position: relative;">
                                <div style="position: absolute; left: 10px; bottom: 10px; font-size: x-large;">4</div>
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                        </div>
                        <div style="width: 100%; display: flex; flex-direction: row;">
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 2px; position: relative;">
                                <div style="position: absolute; left: 10px; bottom: 10px; font-size: x-large;">3</div>
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                        </div>
                        <div style="width: 100%; display: flex; flex-direction: row;">
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 2px; position: relative;">
                                <div style="position: absolute; left: 10px; bottom: 10px; font-size: x-large;">2</div>
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                        </div>
                        <div style="width: 100%; display: flex; flex-direction: row;">
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 2px; position: relative;">
                                <div style="position: absolute; left: 10px; bottom: 10px; font-size: x-large;">1</div>
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                            <div
                                style="width: 20%; aspect-ratio: 1/1; border-style: solid; border-width: 0px 2px 2px 0px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="width: 50%; display: flex; flex-direction: column; gap: 30px; padding-top: 30px;">
            <div style="display: flex; flex-direction: row; gap: 8px;">
                <div style="width: 50%;">
                    <h1 style="font-size: large; margin: 0px;">Mission Surface Imaging</h1>
                    <canvas style="width: 100%; aspect-ratio: 2/1; border-style: solid; object-fit: cover;"
                        id="mission_surface"> </canvas>
                    <button id="capture">Capture</button>
                </div>
                <div style="width: 50%;">
                    <h1 style="font-size: large; margin: 0px;">Mission Underwater Imaging</h1>
                    <img style="width: 100%; aspect-ratio: 2/1; border-style: solid;">
                </div>
            </div>
            <div>
                <h1 style="font-size: large; margin: 0px;">Front Camera</h1>
                <video style="width: 100%; aspect-ratio: 2/1; border-style: solid; object-fit: cover;"
                    id="video_front"></video>
            </div>
            <div>
                <h1 style="font-size: large; margin: 0px;">Bottom Camera</h1>
                <video style="width: 100%; aspect-ratio: 2/1; border-style: solid; object-fit: cover;"
                    id="video_bottom"></video>
            </div>
        </div>
    </div>
</body>

<script>

    // Log Information
    // time
    const id_time = document.getElementById("time");

    setInterval(function () {
        let time = new Date()
        id_time.innerHTML = time.getHours() + ":" + time.getMinutes() + ":" + time.getSeconds()
    }, 1000)

    let date = new Date()
    // date
    const id_date = document.getElementById("date");
    id_date.innerHTML = date.getDate() + "/" + date.getMonth() + "/" + date.getFullYear()

    // day
    const id_day = document.getElementById("day");
    const day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
    id_day.innerHTML = day[date.getDay()]

    // status
    const class_status = document.getElementsByClassName("status")
    const data = [
        "Preparation",
        "Start",
        "Floating Ball Set",
        "Mission Surface Imaging",
        "Mission Underwater Imaging",
        "Finish"
    ]

    const status = [
        "Pending",
        "On Process",
        "Done"
    ]

    const status_color = [
        "#D9D9D9",
        "#F1C40F",
        "#28B463"
    ]


    let progress = 1;

    for (let i = 0; i < class_status.length; i++) {
        if (i % 2 == 0) {
            class_status[i].innerHTML = data[i / 2]
        }
        else {
            let number = Math.floor(i / 2);
            class_status[i].innerHTML = status[(number < progress ? 2 : (number == progress ? 1 : 0))]
            class_status[i].style.backgroundColor = status_color[(number < progress ? 2 : (number == progress ? 1 : 0))]
        }
    }

    // Camera
    let mediaDevices = navigator.mediaDevices;
    document.addEventListener("DOMContentLoaded", () => {
        let but = document.getElementById("but");
        let video_front = document.getElementById("video_front");
        let video_bottom = document.getElementById("video_bottom");
        let mediaDevices = navigator.mediaDevices;
        video_front.muted = true;
        video_bottom.muted = true;
        // but.addEventListener("click", () => {

        // Accessing the user camera and video.
        mediaDevices
            .getUserMedia({
                video: true,
                audio: true,
            })
            .then((stream) => {
                // Changing the source of video to current stream.
                video_front.srcObject = stream;
                video_front.addEventListener("loadedmetadata", () => {
                    video_front.play();
                });

                video_bottom.srcObject = stream;
                video_bottom.addEventListener("loadedmetadata", () => {
                    video_bottom.play();
                });

            })
            .catch(alert);
        // });
    });

    // Capture
    const capture = document.getElementById("capture")
    const canvas = document.getElementById('mission_surface');
    const video = document.getElementById("video_front")

    capture.addEventListener('click', () => {
        // Set the canvas size to match the video size
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        // Draw the current frame from the video onto the canvas
        const context = canvas.getContext('2d');
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        // Convert the canvas content to a data URL (image)
        const imageDataURL = canvas.toDataURL('image/png');

        // You can now use this data URL as needed, e.g., display it, upload it, etc.
        console.log('Captured image data URL:', imageDataURL);

        // Optionally, display the captured image on the canvas
        canvas.style.display = 'block';
    });

</script>

</html>